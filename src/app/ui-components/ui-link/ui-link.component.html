<div
  class="link-list"
  cdkDropList
  [cdkDropListData]="group.links"
  [cdkDropListConnectedTo]="getConnectedDropLists(category)"
  (cdkDropListDropped)="dropLink($event)"
  id="group-list-{{ group.id }}"
>
  <div *ngIf="group.links.length === 0" class="empty-drop-placeholder">
    <span>Drop link here or <span (click)="openAddLinkDialog()"><u style="cursor: pointer;">click here</u> to add new link.</span></span>
  </div>

  <div *ngFor="let link of getSortedLinks(); trackBy: trackById">
    <div
      class="link-item"
      cdkDrag
      [cdkDragData]="link"
      [cdkDragDisabled]="isLinkDraggable"
      [class.handles-visible]="showHandles"
    >
     <i
       *ngIf="showHandles"
       class="bi bi-list link-drag-handle"
       cdkDragHandle
       title="Drag link"
       (mouseover)="allowLinkDrag()"
       (mouseout)="preventLinkDrag()"
     ></i>
     
     <img
     class="link-icon"
     (click)="openLink(link.url)"
     (auxclick)="handleAuxClick($event, link.url)"
     [src]="'/assets/icons/' + (link.icon || 'default.png')"
     [alt]="link.name || 'Link Icon'"
     (error)="onImageError($event)"
   />

      <div
        class="link-name-container"
        (click)="openLink(link.url)"
        (auxclick)="handleAuxClick($event, link.url)"
        [title]="link.url"
        style="cursor: pointer;"
      >
        {{ link.name }}
      </div>

      <i class="bi bi-three-dots-vertical link-menu-icon" [matMenuTriggerFor]="linkMenu"></i>
      <mat-menu #linkMenu="matMenu">
        <button mat-menu-item (click)="editLink(link)">
          <i class="bi bi-pen"></i> Edit Link
        </button>
        <button mat-menu-item (click)="openManageLinksDialog()">
          <i class="bi bi-sliders"></i> Link Manager
        </button>
        <button mat-menu-item (click)="deleteLink(link)">
          <i class="bi bi-x-lg"></i> Delete Link
        </button>
      </mat-menu>
    </div>
  </div>
</div>
